
## 文件处理
将程序运行结束后仍需保存的数值和字符串等数据保存在文件(file)中。
### 流
- 对文件、画面、键盘等的数据的输入输出操作，都是通过流进行的
- 标准流
   - stdin---标准输入流(standard input stream)为从键盘输入
   - stdout---标准输出流(standard output stream)输出至显示器界面
   - stderr---标准错误流(standard error stream)写出错误的流，输出至显示器
- 文本文件打开
   - 函数库中的fopen函数 用法`p = fopen("abc.txt", "r");`
   - 这里的 p 是一个指针变量，指向fopen函数新建的流，并且以只读的模式打开文本文件。

|实参||
|:--|:--|
|r| 以只读模式打开文本文件。|
|W| 以只写模式建立文本文件，若文件存在则文件长度清为0。|
|a| 以追加模式(从文件末尾处开始的只写模式)打开或建立文本文件。|
|rb| 以只读模式打开二进制文件。|
|wb |以只写模式建立二进制文件，若文件存在则文件长度清为0。|
|ab |以追加模式(从文件末尾处开始的只写模式)打开或建立二进制文件。|
|r+ |以更新(读写)模式打开文本文件。w+以更新模式建立文本文件，若文件存在则文件长度清为0。|
|a+ |以追加模式(从文件末尾处开始写入的更新模式)打开或建立文本文件。|
|r+b |或 rb+ 以更新(读写)模式打开二进制文件。|
|w+b |或 wb+ 以更新模式建立二进制文件，若文件存在则文件长度清为0。|
|a+b |或 ab+ 以追加模式(从文件末尾处开始写入的更新模式)打开或建立二进制文件。|

- 关闭文本文件
   - 打开完文件后，还要将其关闭，`fclose(p);` 
- 读取文本数据
   - 用 `fscanf(p, "%d", &a)` 可以读取指针指向的流的文本内容，并且返回值为读取的项目数
> 问题：这里在例子中连续读取数据，是如何分隔要读取数据的位数？
   - 返回值：若没有执行任何转换就发生了输入错误，则返回宏定义EOF的值。否则，返回成功赋值的输入项数。若在输入中发生匹配错误，则返回的输入项数会少于转换说明符对应的实参个数，甚至为0。

- 写入数据
   - 返回值:返回发送的字符数。当发生输出错误时，返回负值。
   - 与printf函数类似，但增加流第一个输出流参数，`fprintf(stdout, "%d", x);` 等同于 `printf("%d", x);`

- 显示文件内容
   - 之前学习过从标准输入流读取数据，`gechar()`函数来实现，当从任意文件读取时
   - 用 `fgetc(p)` 函数可以类似getchar函数，但多出一个输入流参数，并结合 putchar函数显示文本数据，
   - 返回值：返回stream所指输入流的下一个字符。若在流中检查到文件末尾，则设置该流的文件结束指示符并返回EOF。如果发生读取错误，就设置该流的错误指示符并返回EOF。

- 文件的复制
   - 将文件读取到的字符输出到任意文件中，
   - `fputc(ch, dp);` 这里的参数分别是输入的字符和目标文件，类似 putchar(ch) 函数，并且要判断原文件和目标文件是否为空，并且分别以只读和只写来打开。
   - 返回值：返回写入的字符。如果发生写入错误，就设置该流的错误指示符并返回EOF。

### 文件与二进制
- 二进制文件中保存实数
   - 向文件写入的函数：`fwrite(&pi,sizeof(double),1,fp);` 
   - 从文件读取的函数: `fread(&pi,sizeof(double),1,fp);` 
   - 接收4个参数。第一个参数是指向读写数据的首地址的指针，第二个参数是数据的长度，第三个参数是数据的个数，第四个参数是指向读写对象的流的指针。

- 显示文件自身
   - 可以用“字符”和“字符编码(十六进制)”显示了以二进制文件类型打开的文件内容。
   - 头文件为 `#include <ctype.h>` 函数`isprint(int c)` 判断字符c是否为可打印字符(含空格)，可以结合 putchar 函数将二进制文件进行替换用其他符号打印出来
   - 返回值：若判断成功则返回0以外的值(真)，否则返回0。

> 问题：这一章中总体来说有的部分理解难度不太大，但是在读取文本数据的那一块，较为疑惑的是，对于一个文本数据，
> 例如下面所示，是如何区分间隔身高和体重的数据，然后进行赋值的？
```
Aiba16059.3
Kurata16251.6
Masaki18216.5
Tanaka17060.7
Tsuji17583.9
Washio17572,5
```




